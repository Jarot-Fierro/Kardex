{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Kardex App{% endblock %}</title>

    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
        rel="stylesheet" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'adminlte3/plugins/fontawesome-free/css/all.min.css' %}" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'adminlte3/plugins/bootstrap/css/bootstrap.min.css' %}" />

    <!-- DataTables -->
    <link rel="stylesheet"
        href="{% static 'adminlte3/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}" />
    <link rel="stylesheet"
        href="{% static 'adminlte3/plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}" />
    <link rel="stylesheet"
        href="{% static 'adminlte3/plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}" />

    <!-- Select2 -->
    <link rel="stylesheet" href="{% static 'adminlte3/plugins/select2/css/select2.min.css' %}" />
    <link rel="stylesheet"
        href="{% static 'adminlte3/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css' %}" />

    <!-- SweetAlert2 -->
    <link rel="stylesheet"
        href="{% static 'adminlte3/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css' %}" />

    <!-- InputMask -->
    <link rel="stylesheet" href="{% static 'adminlte3/plugins/inputmask/jquery.inputmask.min.css' %}" />

    <!-- AdminLTE -->
    <link rel="stylesheet" href="{% static 'adminlte3/css/adminlte.min.css' %}" />
    {{ form.media.css }}
</head>
<style>
    #Table {
    font-size: 14px;
}

</style>

<body class="hold-transition layout-top-nav">
    <div class="wrapper">
        {% include 'components/banner.html' %}
        {% include 'components/navbar.html' %}

        <div class="content-wrapper">
            <div class="content-header">
                <div class="container">
                    {% include 'components/messages/messages.html' %}
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">{{ title }}</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                home
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="container">
                    {% block content %}{% endblock %}
                </div>
            </div>
        </div>



        {% include 'components/footer.html' %}
    </div>

    <!-- REQUIRED SCRIPTS -->

    <!-- jQuery -->
    <script src="{% static 'adminlte3/plugins/jquery/jquery.min.js' %}"></script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'adminlte3/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <!-- DataTables core -->
    <script src="{% static 'adminlte3/plugins/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>
    <!-- DataTables Buttons -->
    <script src="{% static 'adminlte3/plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
    <!-- Dependencias para exportar botones -->
    <script src="{% static 'adminlte3/plugins/jszip/jszip.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/pdfmake/pdfmake.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/pdfmake/vfs_fonts.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
    <script src="{% static 'adminlte3/plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>

    <!-- Select2 -->
    <script src="{% static 'adminlte3/plugins/select2/js/select2.full.min.js' %}"></script>
    <!-- SweetAlert2 -->
    <script src="{% static 'adminlte3/plugins/sweetalert2/sweetalert2.min.js' %}"></script>
    <!-- InputMask -->
    <script src="{% static 'adminlte3/plugins/inputmask/jquery.inputmask.min.js' %}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'adminlte3/js/adminlte.min.js' %}"></script>

    <script src="{% static 'js/edit_modal.js' %}"></script>
    <script src="{% static 'js/bootstrap_validate.js' %}" ></script>

    {{ form.media.js }}

    <script>
    $(function () {
        const table = $("#Table").DataTable({
            processing: true,
            serverSide: true,
            responsive: true,
            lengthChange: true,
            autoWidth: false,
            pageLength: 10,
            ajax: {
                url: window.location.href,
                data: {
                    datatable: 1  // Flag que tu vista ya reconoce
                }
            },
            buttons: ["copy", "csv", "excel", "pdf", "print", "colvis"],
            language: {
                url: "{% static 'adminlte3/plugins/datatables/es-ES.json' %}"
            },
            columns: [
                { data: 'ID' },  // Primer campo: ID
                { data: 'actions', orderable: false },  // Botones
                {% for col in columns %}
                    {% if col != 'ID' %}
                        { data: '{{ col }}' },
                    {% endif %}
                {% endfor %}
            ],
        });

        table.buttons().container().appendTo('#Table_wrapper .col-md-6:eq(0)');
    });
</script>



</body>

</html>
